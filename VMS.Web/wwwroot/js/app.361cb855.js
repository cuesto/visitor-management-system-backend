(function(e){function t(t){for(var s,r,l=t[0],n=t[1],c=t[2],u=0,m=[];u<l.length;u++)r=l[u],o[r]&&m.push(o[r][0]),o[r]=0;for(s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s]);d&&d(t);while(m.length)m.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],s=!0,l=1;l<a.length;l++){var n=a[l];0!==o[n]&&(s=!1)}s&&(i.splice(t--,1),e=r(r.s=a[0]))}return e}var s={},o={app:0},i=[];function r(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=s,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(a,s,function(t){return e[t]}.bind(null,s));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],n=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var d=n;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";var s=a("1356"),o=a.n(s);o.a},1356:function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);var s=a("2b0e"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",{attrs:{id:"inspire"}},[e.logged?a("v-navigation-drawer",{attrs:{clipped:e.$vuetify.breakpoint.lgAndUp,app:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[[a("v-list",{attrs:{dense:""}},[e.isAdmin||e.isRecep?[a("v-list-item",{attrs:{to:{name:"home"}}},[a("v-list-item-action",[a("v-icon",[e._v("home")])],1),a("v-list-item-title",[e._v("Inicio")])],1)]:e._e(),e.isAdmin||e.isRecep?[a("v-list-item",{attrs:{to:{name:"visitors"}}},[a("v-list-item-action",[a("v-icon",[e._v("person_add")])],1),a("v-list-item-title",[e._v("Visitantes")])],1)]:e._e(),e.isAdmin?[a("v-list-item",{attrs:{to:{name:"employeerequests"}}},[a("v-list-item-action",[a("v-icon",[e._v("today")])],1),a("v-list-item-title",[e._v("Solicitudes")])],1)]:e._e(),e.isAdmin?[a("v-list-item",{attrs:{to:{name:"employees"}}},[a("v-list-item-action",[a("v-icon",[e._v("people")])],1),a("v-list-item-title",[e._v("Empleados")])],1)]:e._e(),e.isAdmin?[a("v-list-item",{attrs:{to:{name:"blacklists"}}},[a("v-list-item-action",[a("v-icon",[e._v("block")])],1),a("v-list-item-title",[e._v("Bloqueados")])],1)]:e._e(),e.isAdmin?[a("v-list-item",{attrs:{to:{name:"users"}}},[a("v-list-item-action",[a("v-icon",[e._v("security")])],1),a("v-list-item-title",[e._v("Usuarios")])],1)]:e._e()],2)]],2):e._e(),a("v-app-bar",{attrs:{"clipped-left":e.$vuetify.breakpoint.lgAndUp,app:"",color:"blue darken-3",dark:""}},[a("v-toolbar-title",{staticClass:"ml-0 pl-4",staticStyle:{width:"300px"}},[a("v-app-bar-nav-icon",{on:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}}),a("span",{staticClass:"hidden-sm-and-down"},[e._v("Sistema de Visitas")])],1),a("v-spacer"),e.logged?a("v-btn",{attrs:{text:""},on:{click:e.logout}},[a("v-icon",[e._v("logout")]),e._v("Salir\n    ")],1):a("v-btn",{attrs:{to:{name:"login"},text:""}},[a("v-icon",[e._v("apps")]),e._v("Login\n    ")],1)],1),a("v-content",[a("v-container",{attrs:{fluid:"","fill-height":""}},[a("v-slide-y-transition",{attrs:{mode:"out-in"}},[a("router-view")],1)],1)],1),a("v-footer",{attrs:{blue:"",height:"auto"}},[a("v-layout",{attrs:{"justify-center":""}},[a("v-flex",{attrs:{"text-xs-center":""}},[a("v-card",{staticClass:"white--text",attrs:{flat:"",tile:"",color:"primary"}},[a("v-card-text",{staticClass:"white--text pt-0"},[e._v("InfoSocial ©2019")])],1)],1)],1)],1)],1)},i=[],r={name:"App",data:()=>({drawer:null}),computed:{logged(){return this.$store.state.user},isAdmin(){return this.$store.state.user&&"administrator"==this.$store.state.user.role},isRecep(){return this.$store.state.user&&"recepionist"==this.$store.state.user.role}},created(){this.$store.dispatch("autoLogin")},methods:{logout(){this.$store.dispatch("logOut")}}},l=r,n=(a("034f"),a("2877")),c=a("6544"),d=a.n(c),u=a("7496"),m=a("40dc"),p=a("5bc1"),v=a("8336"),f=a("b0af"),h=a("99d9"),y=a("a523"),b=a("a75b"),x=a("0e8f"),g=a("553a"),k=a("132d"),w=a("a722"),M=a("8860"),R=a("da13"),_=a("1800"),V=a("5d23"),C=a("f774"),q=a("0789"),N=a("2fa4"),E=a("2a7f"),T=Object(n["a"])(l,o,i,!1,null,null,null),$=T.exports;d()(T,{VApp:u["a"],VAppBar:m["a"],VAppBarNavIcon:p["a"],VBtn:v["a"],VCard:f["a"],VCardText:h["b"],VContainer:y["a"],VContent:b["a"],VFlex:x["a"],VFooter:g["a"],VIcon:k["a"],VLayout:w["a"],VList:M["a"],VListItem:R["a"],VListItemAction:_["a"],VListItemTitle:V["b"],VNavigationDrawer:C["a"],VSlideYTransition:q["f"],VSpacer:N["a"],VToolbarTitle:E["a"]});var D=a("8c4f"),B=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Home")},S=[],P=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-layout",{attrs:{"align-start":""}},[a("v-flex",[a("v-card",[a("v-container",[a("v-row",{attrs:{cols:"6"}},[a("v-col",{attrs:{cols:"5"}},[a("v-card",[a("v-data-table",{staticClass:"elevation-1",attrs:{"items-per-page":5,"footer-props":{"items-per-page-options":[5,10,15,20,25]},headers:e.headersVisitorsByPurpose,items:e.visitorsByPurpose},scopedSlots:e._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"#03a9f4"}},[a("v-toolbar-title",[e._v("Propósito de Visitas")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-spacer")],1)]},proxy:!0},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:e.getVisitorsByPurpose}},[a("v-icon",{attrs:{left:"",dark:""}},[e._v("autorenew")]),e._v("Refrescar\n                  ")],1)]},proxy:!0}])})],1)],1),a("v-col",{attrs:{cols:"7"}},[a("v-card",[a("v-data-table",{staticClass:"elevation-1",attrs:{"items-per-page":5,"footer-props":{"items-per-page-options":[5,10,15,20,25]},headers:e.headersVisitors,search:e.searchVisitors,items:e.visitors,"sort-by":"visitorKey"},scopedSlots:e._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"#67daff"}},[a("v-toolbar-title",[e._v("Visitantes - Dentro")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Búsqueda","single-line":"","hide-details":""},model:{value:e.searchVisitors,callback:function(t){e.searchVisitors=t},expression:"searchVisitors"}})],1)]},proxy:!0},{key:"item.options",fn:function(t){var s=t.item;return[a("v-icon",{staticClass:"mr-1",attrs:{size:"sm"},on:{click:function(t){return e.showTicketModal(s)}}},[e._v("print")]),a("v-icon",{staticClass:"mr-1",attrs:{size:"sm",variant:"outline-info",color:"red"},on:{click:function(t){return e.checkOut(s)}}},[e._v("call_made")])]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:e.getVisitors}},[a("v-icon",{attrs:{left:"",dark:""}},[e._v("autorenew")]),e._v("Refrescar\n                  ")],1)]},proxy:!0}])})],1)],1)],1),a("v-row",{attrs:{cols:"6"}},[a("v-col",[a("v-card",[a("v-data-table",{staticClass:"elevation-1",attrs:{"items-per-page":5,"footer-props":{"items-per-page-options":[5,10,15,20,25]},headers:e.headersEmployeeRequest,search:e.searchEmployeesRequest,items:e.employeesrequest,"sort-by":"employeeRequestKey"},scopedSlots:e._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"#0093c4"}},[a("v-toolbar-title",[e._v("Visitas Esperadas")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Búsqueda","single-line":"","hide-details":""},model:{value:e.searchEmployeesRequest,callback:function(t){e.searchEmployeesRequest=t},expression:"searchEmployeesRequest"}})],1)]},proxy:!0},{key:"item.options",fn:function(t){var s=t.item;return[a("v-icon",{staticClass:"mr-1",attrs:{size:"sm",variant:"outline-info",color:"blue"},on:{click:function(t){return e.checkIn(s)}}},[e._v("done_outline")])]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:e.getEmployeesRequest}},[a("v-icon",{attrs:{left:"",dark:""}},[e._v("autorenew")]),e._v("Refrescar\n                  ")],1)]},proxy:!0}])})],1)],1)],1),a("v-dialog",{attrs:{"max-width":"1000px"},model:{value:e.ticketModal,callback:function(t){e.ticketModal=t},expression:"ticketModal"}},[a("v-card",[a("v-card-text",[a("v-btn",{on:{click:function(t){return e.printPDF()}}},[a("v-icon",[e._v("print")])],1),a("div",{attrs:{id:"ticket"}},[a("table",{attrs:{border:"0",cellpadding:"0",cellspacing:"0",width:"100%"}},[a("tr",{attrs:{valign:"top"}},[a("td",{attrs:{width:"0.861%"}}),a("td",{attrs:{width:"0.014%"}}),a("td",{attrs:{width:"0.806%"}}),a("td",{attrs:{width:"13.458%"}}),a("td",{attrs:{width:"20.472%"}}),a("td",{attrs:{width:"0.250%"}}),a("td",{attrs:{width:"0.014%"}}),a("td",{attrs:{width:"64.125%"}})]),a("tr",{attrs:{valign:"top"}},[a("td",{attrs:{colspan:"3"}},[e._v(" ")]),a("td",{attrs:{nowrap:"true"}}),a("td",{attrs:{colspan:"4"}},[e._v(" ")])]),a("tr",{attrs:{valign:"top"}},[a("td",{attrs:{height:"15px",colspan:"8"}},[e._v(" ")])]),a("tr",{attrs:{valign:"top"}},[a("td",{attrs:{colspan:"2"}},[e._v(" ")]),a("td",{attrs:{nowrap:"true",colspan:"3"}},[a("table",{attrs:{width:"167px",border:"0",cellpadding:"0",cellspacing:"0"}},[a("td",{attrs:{align:"left"}},[a("span",[a("font",{attrs:{face:"Arial",color:"#000000",size:"2"}},[a("b",[e._v("Nombre:")])])],1)])])]),a("td",{attrs:{colspan:"3"}},[e._v(" ")])]),a("tr",{attrs:{valign:"top"}},[a("td",{attrs:{colspan:"2"}},[e._v(" ")]),a("td",{attrs:{nowrap:"true",colspan:"5"}},[a("table",{attrs:{width:"168px",border:"0",cellpadding:"0",cellspacing:"0"}},[a("tr",{attrs:{valign:"top"}},[a("td",{attrs:{align:"left"}},[a("span",[a("font",{attrs:{face:"Arial",color:"#000000",size:"3"}},[e._v(e._s(e.label.name))])],1)])])])]),a("td",[e._v(" ")])]),e.label.lastname?a("tr",{attrs:{valign:"top"}},[a("td",{attrs:{colspan:"2"}},[e._v(" ")]),a("td",{attrs:{nowrap:"true",colspan:"5"}},[a("table",{attrs:{width:"168px",border:"0",cellpadding:"0",cellspacing:"0"}},[a("tr",{attrs:{valign:"top"}},[a("td",{attrs:{align:"left"}},[a("span",[a("font",{attrs:{face:"Arial",color:"#000000",size:"3"}},[e._v(e._s(e.label.lastname))])],1)])])])]),a("td",[e._v(" ")])]):e._e(),a("tr",{attrs:{valign:"top"}},[a("td",{attrs:{colspan:"2"}},[e._v(" ")]),a("td",{attrs:{nowrap:"true",colspan:"3"}},[a("table",{attrs:{width:"167px",border:"0",cellpadding:"0",cellspacing:"0"}},[a("td",{attrs:{align:"left"}},[a("span",[a("font",{attrs:{face:"Arial",color:"#000000",size:"2"}},[a("b",[e._v("Cédula:")])])],1)])])]),a("td",{attrs:{colspan:"3"}},[e._v(" ")])]),a("tr",{attrs:{valign:"top"}},[a("td",[e._v(" ")]),a("td",{attrs:{nowrap:"true",colspan:"5"}},[a("table",{attrs:{width:"168px",border:"0",cellpadding:"0",cellspacing:"0"}},[a("td",{attrs:{align:"left"}},[a("span",[a("font",{attrs:{face:"Arial",color:"#000000",size:"3"}},[e._v(e._s(e.label.taxnumber))])],1)])])]),a("td",{attrs:{colspan:"2"}},[e._v(" ")])]),a("tr",{attrs:{valign:"top"}},[a("td",{attrs:{colspan:"2"}},[e._v(" ")]),a("td",{attrs:{nowrap:"true",colspan:"3"}},[a("table",{attrs:{width:"167px",border:"0",cellpadding:"0",cellspacing:"0"}},[a("td",{attrs:{align:"left"}},[a("span",[a("font",{attrs:{face:"Arial",color:"#000000",size:"2"}},[a("b",[e._v("Motivo Visita:")])])],1)])])]),a("td",{attrs:{colspan:"3"}},[e._v(" ")])]),a("tr",{attrs:{valign:"top"}},[a("td",{attrs:{colspan:"2"}},[e._v(" ")]),a("td",{attrs:{nowrap:"true",colspan:"5"}},[a("table",{attrs:{width:"168px",border:"0",cellpadding:"0",cellspacing:"0"}},[a("td",{attrs:{align:"left"}},[a("span",[a("font",{attrs:{face:"Arial",color:"#000000",size:"3"}},[e._v(e._s(e.label.purpose))])],1)])])]),a("td",[e._v(" ")])]),a("tr",{attrs:{valign:"top"}},[a("td",{attrs:{colspan:"2"}},[e._v(" ")]),a("td",{attrs:{nowrap:"true",colspan:"3"}},[a("table",{attrs:{width:"167px",border:"0",cellpadding:"0",cellspacing:"0"}},[a("td",{attrs:{align:"left"}},[a("span",[a("font",{attrs:{face:"Arial",color:"#000000",size:"2"}},[a("b",[e._v("A donde se dirige:")])])],1)])])]),a("td",{attrs:{colspan:"3"}},[e._v(" ")])]),a("tr",{attrs:{valign:"top"}},[a("td",{attrs:{colspan:"2"}},[e._v(" ")]),a("td",{attrs:{nowrap:"true",colspan:"5"}},[a("table",{attrs:{width:"168px",border:"0",cellpadding:"0",cellspacing:"0"}},[a("tr",{attrs:{valign:"top"}},[a("td",{attrs:{align:"left"}},[a("span",[a("font",{attrs:{face:"Arial",color:"#000000",size:"3"}},[e._v(e._s(e.label.employee)+" - ")])],1)])]),a("tr",{attrs:{valign:"top"}},[a("td",{attrs:{align:"left"}},[a("span",[a("font",{attrs:{face:"Arial",color:"#000000",size:"3"}},[e._v(e._s(e.label.department))])],1)])])])]),a("td",[e._v(" ")])]),a("tr",{attrs:{valign:"top"}},[a("td",{attrs:{colspan:"2"}},[e._v(" ")]),a("td",{attrs:{nowrap:"true",colspan:"3"}},[a("table",{attrs:{width:"167px",border:"0",cellpadding:"0",cellspacing:"0"}},[a("td",{attrs:{align:"left"}},[a("span",[a("font",{attrs:{face:"Arial",color:"#000000",size:"2"}},[a("b",[e._v("Fecha de Registro:")])])],1)])])]),a("td",{attrs:{colspan:"3"}},[e._v(" ")])]),a("tr",{attrs:{valign:"top"}},[a("td",{attrs:{colspan:"2"}},[e._v(" ")]),a("td",{attrs:{nowrap:"true",colspan:"5"}},[a("table",{attrs:{width:"168px",border:"0",cellpadding:"0",cellspacing:"0"}},[a("td",{attrs:{align:"left"}},[a("span",[a("font",{attrs:{face:"Arial",color:"#000000",size:"2"}},[e._v(e._s(e.label.startdate))])],1)])])]),a("td",[e._v(" ")])]),a("tr",{attrs:{valign:"top"}},[a("td",{attrs:{height:"12px",colspan:"8"}},[e._v(" ")])])])]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){return e.hideTicketModal()}}},[e._v("Cancelar")])],1)],1)],1)],1)],1)],1)],1)},I=[],A=a("bc3a"),K=a.n(A),z=a("3a60"),L=a("e511"),O=a.n(L),F=(a("0da4"),a("c0e9")),j=a.n(F),U={data:()=>({ticketModal:!1,maskDate:"##:##",searchEmployeesRequest:"",employeesrequest:[],headersEmployeeRequest:[{text:"Nombre",sortable:!0,value:"visitorName"},{text:"Compañía",sortable:!0,value:"company"},{text:"Teléfono",sortable:!0,value:"visitorPhone"},{text:"Fecha Esperada",sortable:!0,value:"startDate"},{text:"Hora Esperada",sortable:!0,value:"startTime"},{text:"Propósito",sortable:!0,value:"purposeDescription"},{text:"Empleado(Quién lo recibirá)",sortable:!0,value:"employeeName"},{text:"Opciones",value:"options",sortable:!1}],employeeRequestModel:{employeeRequestKey:0,employeeKey:0,visitorName:"",visitorEmail:"",visitorPhone:"",taxNumber:"",company:"",purposeKey:0,startDate:"",startTime:null,endDate:"",endTime:null,comments:"",status:0,employeeName:"",purposeDescription:"",daysList:""},searchVisitors:"",visitors:[],headersVisitors:[{text:"Nombre",sortable:!0,value:"name"},{text:"Celular",sortable:!0,value:"phone"},{text:"Empleado(Quién lo recibió)",sortable:!0,value:"employeeName"},{text:"Opciones",value:"options",sortable:!1}],visitorsByPurpose:[],headersVisitorsByPurpose:[{text:"Tipo visita",sortable:!1,value:"description"},{text:"Cantidad",sortable:!1,value:"value"}],label:{name:"",lastname:"",taxnumber:"",purpose:"",employee:"",department:"",startdate:""}}),created(){this.getEmployeesRequest(),this.getVisitors(),this.getVisitorsByPurpose()},methods:{showTicketModal(e){this.label.name=e.name,e.name.length>=14&&(this.label.name=e.name.substring(0,14),this.label.lastname=e.name.substring(14,e.name.length)),this.label.taxnumber=e.taxNumberVisitor,this.label.purpose=e.purposeDisplay,this.label.employee=e.employeeName,this.label.department=e.departmentDisplay,this.label.startdate=e.startDate+" "+e.startTime,this.ticketModal=!0},hideTicketModal(){this.ticketModal=!1},printPDF(e){var t=document.getElementById("ticket");j()(t).then(function(e){var t=e.toDataURL("image/png"),a=210,s=e.height*a/e.width,o=new O.a,i=0;o.addImage(t,"PNG",0,i,a,s),o.save("ticket.pdf")})},displayNotification(e,t){this.$swal.fire({position:"top-end",type:e,title:t,showConfirmButton:!1,timer:2500})},async getEmployeesRequest(){let e=this;await K.a.get("api/EmployeeRequests/GetEmployeeRequests").then(function(t){e.employeesrequest=t.data}).catch(function(t){401==t.response.status||e.displayNotification("error",t.message)})},async getVisitors(){let e=this;await K.a.get("api/Visitors/GetVisitors").then(function(t){e.visitors=t.data}).catch(function(t){401==t.response.status||e.displayNotification("error",t.message)})},checkIn(e){rt.push({name:"visitorId",params:{id:e.employeeRequestKey}})},checkOut(e){this.$swal.fire({title:"¿Está Seguro de dar salida a esta persona?",text:"¡No será posible revertir el cambio!",type:"warning",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"¡Si!",cancelButtonText:"Cancelar"}).then(t=>{if(t.value){let t=this;e.status=2,e.ModifiedBy=this.$store.state.user.name,K.a.put("api/Visitors/PutVisitor",e).then(function(e){"ERROR"==e.data.result?t.displayNotification("error",e.data.message):(t.getVisitors(),t.displayNotification("success","Se dio salida a la persona correctamente."))}).catch(function(e){401==e.response.status||t.displayNotification("error",e.message)})}})},async getVisitorsByPurpose(){let e=this;await K.a.get("api/Purposes/GetVisitorsPurpose").then(function(t){e.visitorsByPurpose=t.data}).catch(function(t){401==t.response.status||e.displayNotification("error",t.message)})}}},G=U,H=a("62ad"),Z=a("8fea"),J=a("169a"),Q=a("ce7e"),X=a("0fd9"),Y=a("8654"),W=a("71d9"),ee=Object(n["a"])(G,P,I,!1,null,null,null),te=ee.exports;d()(ee,{VBtn:v["a"],VCard:f["a"],VCardText:h["b"],VCol:H["a"],VContainer:y["a"],VDataTable:Z["a"],VDialog:J["a"],VDivider:Q["a"],VFlex:x["a"],VIcon:k["a"],VLayout:w["a"],VRow:X["a"],VSpacer:N["a"],VTextField:Y["a"],VToolbar:W["a"],VToolbarTitle:E["a"]});var ae={components:{Home:te}},se=ae,oe=Object(n["a"])(se,B,S,!1,null,null,null),ie=oe.exports,re=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{"fill-height":"",fluid:"","grid-list-xl":""}},[a("v-layout",{attrs:{"justify-center":"",wrap:""}},[a("v-flex",{attrs:{xs12:"",md8:""}},[a("v-card",{attrs:{title:"Edit Profile",text:"Complete your profile"}},[a("v-form",{ref:"form"},[a("v-container",{attrs:{"py-0":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",md5:""}},[a("v-text-field",{directives:[{name:"mask",rawName:"v-mask",value:e.maskCedula,expression:"maskCedula"}],attrs:{loading:e.loadingCedulaButton,label:"Cédula*",rules:[e.rules.required],hint:"Cédula del visitante"},model:{value:e.visitorModel.taxNumberVisitor,callback:function(t){e.$set(e.visitorModel,"taxNumberVisitor",t)},expression:"visitorModel.taxNumberVisitor"}})],1),a("v-flex",{attrs:{xs1:"",md1:""}},[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[a("v-btn",e._g({attrs:{icon:""},on:{click:function(t){return e.verifyCedula(e.visitorModel.taxNumberVisitor)}}},s),[a("v-icon",{attrs:{color:"green lighten-1"}},[e._v("search")])],1)]}}]),model:{value:e.showTooltip,callback:function(t){e.showTooltip=t},expression:"showTooltip"}},[a("span",[e._v("Verificar en DGII")])])],1),a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-text-field",{attrs:{hint:"Nombre del Visitante",label:"Nombre*",rules:[e.rules.required]},model:{value:e.visitorModel.name,callback:function(t){e.$set(e.visitorModel,"name",t)},expression:"visitorModel.name"}})],1),a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-text-field",{attrs:{label:"Correo"},model:{value:e.visitorModel.email,callback:function(t){e.$set(e.visitorModel,"email",t)},expression:"visitorModel.email"}})],1),a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-text-field",{directives:[{name:"mask",rawName:"v-mask",value:e.mask,expression:"mask"}],attrs:{label:"Celular"},model:{value:e.visitorModel.phone,callback:function(t){e.$set(e.visitorModel,"phone",t)},expression:"visitorModel.phone"}})],1),a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-select",{attrs:{items:e.gender,"item-text":"text","item-value":"value",label:"Género*",rules:[e.rules.required]},model:{value:e.visitorModel.gender,callback:function(t){e.$set(e.visitorModel,"gender",t)},expression:"visitorModel.gender"}})],1),a("v-flex",{attrs:{xs12:"",md5:""}},[a("v-text-field",{directives:[{name:"mask",rawName:"v-mask",value:e.maskCedula,expression:"maskCedula"}],attrs:{loading:e.loadingRNCButton,label:"RNC",hint:"RNC de la Compañía del visitante"},model:{value:e.visitorModel.taxNumber,callback:function(t){e.$set(e.visitorModel,"taxNumber",t)},expression:"visitorModel.taxNumber"}})],1),a("v-flex",{attrs:{xs1:"",md1:""}},[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.ons;return[a("v-btn",e._g({attrs:{icon:""},on:{click:function(t){return e.verifyRNC(e.visitorModel.taxNumber)}}},s),[a("v-icon",{attrs:{color:"green lighten-1"}},[e._v("search")])],1)]}}]),model:{value:e.showTooltipRNC,callback:function(t){e.showTooltipRNC=t},expression:"showTooltipRNC"}},[a("span",[e._v("Verificar en DGII")])])],1),a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-text-field",{attrs:{disabled:"",label:"Compañía"},model:{value:e.visitorModel.company,callback:function(t){e.$set(e.visitorModel,"company",t)},expression:"visitorModel.company"}})],1),a("v-flex",{attrs:{xs12:"",md8:""}},[a("v-autocomplete",{attrs:{items:e.employees,rules:[e.rules.required],color:"blue-grey lighten-2",label:"Empleado*","item-text":"displayAutoComplete","item-value":"employeeKey",hint:"Tarjeta - Empleado - Departamento"},model:{value:e.visitorModel.employeeKey,callback:function(t){e.$set(e.visitorModel,"employeeKey",t)},expression:"visitorModel.employeeKey"}})],1),a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-select",{attrs:{items:e.purposes,"item-text":"description","item-value":"purposeKey",label:"Propósito*",rules:[e.rules.required]},model:{value:e.visitorModel.purposeKey,callback:function(t){e.$set(e.visitorModel,"purposeKey",t)},expression:"visitorModel.purposeKey"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-textarea",{attrs:{label:"Comentarios",hint:"Puede digitar cualquier observación o comentario."},model:{value:e.visitorModel.comment,callback:function(t){e.$set(e.visitorModel,"comment",t)},expression:"visitorModel.comment"}})],1),a("v-flex",{attrs:{xs12:"","text-xs-right":""}},[a("v-btn",{staticClass:"mx-0 font-weight-light",attrs:{color:"success"},on:{click:e.save}},[a("v-icon",{attrs:{left:""}},[e._v("save")]),e._v("Guardar\n                ")],1)],1)],1)],1)],1)],1)],1),a("v-flex",{attrs:{xs12:"",md4:""}})],1)],1)},le=[],ne={directives:{mask:z["mask"]},data(){return{showTooltip:!1,showTooltipRNC:!1,loadingRNCButton:!1,loadingCedulaButton:!1,maskCedula:"###########",mask:"(###)-###-####",rules:{required:e=>!!e||"Requerido.",email:e=>{const t=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)||"Correo Inválido."}},visitorModel:{visitorKey:0,name:"",taxNumberVisitor:"",phone:"",email:"",company:"",taxNumber:"",gender:0,image:"",purposeKey:0,comment:"",employeeKey:0,startDate:new Date,endDate:new Date,employeeRequestKey:0,status:1},employees:[],purposes:[],gender:[{text:"Masculino",value:1},{text:"Femenino",value:2},{text:"Otro",value:3}],employeesrequest:null}},created(){this.getEmployees(),this.getPurposes(),this.loadEmployeeRequest()},watch:{value:{handler:function(e){e&&e&&this.$refs.form.resetValidation()}}},methods:{loadEmployeeRequest(){this.id=this.$route.params.id,void 0!=this.id&&this.getEmployeesRequest()},async getEmployeesRequest(){let e=this,t={Authorization:"Bearer "+this.$store.state.token},a={headers:t};await K.a.get("api/EmployeeRequests/GetEmployeeRequest/"+this.id,a).then(function(t){e.employeesrequest=t.data,e.setVisitorFromRequest()}).catch(function(t){e.displayNotification("error",t)})},setVisitorFromRequest(){this.visitorModel.name=this.employeesrequest.visitorName,this.visitorModel.email=this.employeesrequest.visitorEmail,this.visitorModel.phone=this.employeesrequest.visitorPhone,this.visitorModel.taxNumber=this.employeesrequest.taxNumber,this.visitorModel.company=this.employeesrequest.company,this.visitorModel.employeeKey=this.employeesrequest.employeeKey,this.visitorModel.purposeKey=this.employeesrequest.purposeKey,this.visitorModel.comment=this.employeesrequest.comments,this.visitorModel.employeeRequestKey=this.employeesrequest.employeeRequestKey},displayNotification(e,t){this.$swal.fire({position:"top-end",type:e,title:t,showConfirmButton:!1,timer:2500})},async getEmployees(){let e=this,t={Authorization:"Bearer "+this.$store.state.token},a={headers:t};await K.a.get("api/Employees/GetEmployees",a).then(function(t){e.employees=t.data}).catch(function(t){e.displayNotification("error",t)})},async getPurposes(){let e=this,t={Authorization:"Bearer "+this.$store.state.token},a={headers:t};await K.a.get("api/Purposes/GetPurposes",a).then(function(t){e.purposes=t.data}).catch(function(t){e.displayNotification("error",t)})},async verifyCedula(e){let t=this,a={Authorization:"Bearer "+this.$store.state.token},s={headers:a};t.loadingCedulaButton=!0,await K.a.get("api/Services/VerifyRNC/"+e,s).then(function(e){t.visitorModel.name=e.data.nombre,t.loadingCedulaButton=!1,null==e.data.nombre&&t.displayNotification("error","Cédula/RNC no es válida.")}).catch(function(e){t.displayNotification("error",e)})},async verifyRNC(e){let t=this,a={Authorization:"Bearer "+this.$store.state.token},s={headers:a};t.loadingRNCButton=!0,await K.a.get("api/Services/VerifyRNC/"+e,s).then(function(e){t.visitorModel.company=e.data.nombre,t.loadingRNCButton=!1,null==e.data.nombre&&t.displayNotification("error","Cédula/RNC no es válida.")}).catch(function(e){t.displayNotification("error",e)})},async save(){if(this.$refs.form.validate()){let e=this,t={Authorization:"Bearer "+this.$store.state.token},a={headers:t};e.visitorModel.CreatedBy=this.$store.state.user.name,await K.a.post("api/Visitors/PostVisitor",e.visitorModel,a).then(function(t){"ERROR"==t.data.result?e.displayNotification("error",t.data.message):(e.visitorModel.employeeRequestKey>0&&e.updateEmployeeRequest(),e.clean(),e.displayNotification("success","Se creó la visita correctamente."),rt.push({name:"home"}))}).catch(function(t){e.displayNotification("error",t)})}},updateEmployeeRequest(){let e=this;e.employeesrequest.status=1;let t={Authorization:"Bearer "+this.$store.state.token},a={headers:t};e.employeesrequest.ModifiedBy=this.$store.state.user.name,K.a.put("api/EmployeeRequests/PutEmployeeRequest",e.employeesrequest,a).then(function(t){"ERROR"==t.data.result?e.displayNotification("error",t.data.message):console.log("update register")}).catch(function(t){e.displayNotification("error",t)})},clean(){this.visitorModel={visitorKey:0,name:"",taxNumberVisitor:"",phone:"",email:"",company:"",taxNumber:"",gender:0,image:"",purposeKey:0,comment:"",employeeKey:0,startDate:new Date,endDate:new Date,employeeRequestKey:0,status:1}}}},ce=ne,de=a("c6a6"),ue=a("4bd4"),me=a("b974"),pe=a("a844"),ve=a("3a2f"),fe=Object(n["a"])(ce,re,le,!1,null,null,null),he=fe.exports;d()(fe,{VAutocomplete:de["a"],VBtn:v["a"],VCard:f["a"],VContainer:y["a"],VFlex:x["a"],VForm:ue["a"],VIcon:k["a"],VLayout:w["a"],VSelect:me["a"],VTextField:Y["a"],VTextarea:pe["a"],VTooltip:ve["a"]});var ye=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-layout",{attrs:{"align-start":""}},[a("v-flex",[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,search:e.search,items:e.employees,"sort-by":"name"},scopedSlots:e._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[e._v("Empleados")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Búsqueda","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),a("v-spacer"),a("v-dialog",{attrs:{persistent:"","max-width":"600px"},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[a("v-btn",e._g({attrs:{color:"green",dark:""}},s),[a("v-icon",{attrs:{left:"",dark:""}},[e._v("person_add")]),e._v("Nuevo Empleado\n              ")],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-form",{ref:"form"},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"Tarjeta*",rules:[e.rules.required]},model:{value:e.employeeModel.employeeId,callback:function(t){e.$set(e.employeeModel,"employeeId",t)},expression:"employeeModel.employeeId"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-select",{attrs:{items:e.departments,"item-text":"description","item-value":"departmentKey",label:"Departamento*",rules:[e.rules.required]},model:{value:e.employeeModel.departmentKey,callback:function(t){e.$set(e.employeeModel,"departmentKey",t)},expression:"employeeModel.departmentKey"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"Nombre*",rules:[e.rules.required]},model:{value:e.employeeModel.name,callback:function(t){e.$set(e.employeeModel,"name",t)},expression:"employeeModel.name"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"Correo*",rules:[e.rules.required,e.rules.email]},model:{value:e.employeeModel.email,callback:function(t){e.$set(e.employeeModel,"email",t)},expression:"employeeModel.email"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{directives:[{name:"mask",rawName:"v-mask",value:e.mask,expression:"mask"}],attrs:{label:"Telefono"},model:{value:e.employeeModel.officePhone,callback:function(t){e.$set(e.employeeModel,"officePhone",t)},expression:"employeeModel.officePhone"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{directives:[{name:"mask",rawName:"v-mask",value:e.maskExt,expression:"maskExt"}],attrs:{label:"Extensión",hint:"Extensión de telefono"},model:{value:e.employeeModel.officePhoneExt,callback:function(t){e.$set(e.employeeModel,"officePhoneExt",t)},expression:"employeeModel.officePhoneExt"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{directives:[{name:"mask",rawName:"v-mask",value:e.mask,expression:"mask"}],attrs:{label:"Celular"},model:{value:e.employeeModel.mobilePhone,callback:function(t){e.$set(e.employeeModel,"mobilePhone",t)},expression:"employeeModel.mobilePhone"}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-textarea",{attrs:{label:"Comentarios",hint:"Puede digitar cualquier observación o comentario."},model:{value:e.employeeModel.comments,callback:function(t){e.$set(e.employeeModel,"comments",t)},expression:"employeeModel.comments"}})],1)],1)],1),a("small",[e._v("*indica campo requerido.")])],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.dialog=!1}}},[e._v("Cerrar")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.save}},[a("v-icon",{attrs:{left:""}},[e._v("save")]),e._v("Guardar\n                  ")],1)],1)],1)],1)],1)],1)]},proxy:!0},{key:"item.options",fn:function(t){var s=t.item;return[a("v-icon",{staticClass:"mr-1",attrs:{size:"sm",variant:"outline-info",color:"blue"},on:{click:function(t){return e.editItem(s)}}},[e._v("edit")]),a("v-icon",{staticClass:"mr-1",attrs:{size:"sm",color:"red"},on:{click:function(t){return e.deleteItem(s)}}},[e._v("delete")])]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:e.getEmployees}},[a("v-icon",{attrs:{left:"",dark:""}},[e._v("autorenew")]),e._v("Refrescar\n        ")],1)]},proxy:!0}])})],1)],1)},be=[],xe={directives:{mask:z["mask"]},data(){return{mask:"(###)-###-####",maskExt:"####",employees:[],departments:[],dialog:!1,headers:[{text:"Tarjeta",sortable:!0,value:"employeeId"},{text:"Nombre",sortable:!0,value:"name"},{text:"Departamento",sortable:!0,value:"departmentName"},{text:"Extensión",sortable:!0,value:"officePhoneExt"},{text:"Correo",sortable:!0,value:"email"},{text:"Celular",sortable:!0,value:"mobilePhone"},{text:"Opciones",value:"options",sortable:!1}],rules:{required:e=>!!e||"Requerido.",email:e=>{const t=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)||"Correo Inválido."}},search:"",editedIndex:-1,employeeModel:{employeeKey:0,employeeId:"",name:"",departmentKey:0,officePhone:"",officePhoneExt:"",email:"",mobilePhone:"",comments:""}}},computed:{formTitle(){return-1===this.editedIndex?"Nuevo Empleado":"Actualizar Empleado"}},watch:{dialog(e){e||this.close(),void 0!=this.$refs.form&&this.$refs.form.resetValidation()}},created(){this.getEmployees(),this.getDepartments()},methods:{displayNotification(e,t){this.$swal.fire({position:"top-end",type:e,title:t,showConfirmButton:!1,timer:3e3})},async getEmployees(){let e=this,t={Authorization:"Bearer "+this.$store.state.token},a={headers:t};await K.a.get("api/Employees/GetEmployees",a).then(function(t){e.employees=t.data}).catch(function(t){e.displayNotification("error",t)})},async getDepartments(){let e=this,t={Authorization:"Bearer "+this.$store.state.token},a={headers:t};await K.a.get("api/Departments/GetDepartments",a).then(function(t){e.departments=t.data}).catch(function(t){e.displayNotification("error",t)})},editItem(e){this.editedIndex=this.employees.indexOf(e),this.employeeModel=Object.assign({},e),this.dialog=!0},deleteItem(e){this.$swal.fire({title:"¿Está Seguro de Eliminar este empleado?",text:"¡No será posible revertir el cambio!",type:"warning",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"¡Borrar!",cancelButtonText:"Cancelar"}).then(t=>{if(t.value){let t=this,a={Authorization:"Bearer "+this.$store.state.token},s={headers:a};K.a.delete("api/Employees/DeleteEmployee/"+e.employeeKey,s).then(function(e){"ERROR"==e.data.result?t.displayNotification("error",e.data.message):(t.close(),t.getEmployees(),t.clean(),t.displayNotification("success","Se eliminó el empleado correctamente."))}).catch(function(e){t.displayNotification("error",e)})}})},close(){this.dialog=!1,setTimeout(()=>{this.employeeModel=Object.assign({},this.defaultItem),this.editedIndex=-1},300)},clean(){this.employeeModel={employeeKey:0,employeeId:"",name:"",departmentKey:0,officePhone:"",officePhoneExt:"",email:"",mobilePhone:"",comments:""}},async save(){if(this.$refs.form.validate())if(this.editedIndex>-1){let e=this,t={Authorization:"Bearer "+this.$store.state.token},a={headers:t};e.employeeModel.ModifiedBy=this.$store.state.user.name,await K.a.put("api/Employees/PutEmployee",e.employeeModel,a).then(function(t){"ERROR"==t.data.result?e.displayNotification("error",t.data.message):(e.close(),e.getEmployees(),e.clean(),e.displayNotification("success","Se actualizó el empleado correctamente."))}).catch(function(t){e.displayNotification("error",t)})}else{let e=this,t={Authorization:"Bearer "+this.$store.state.token},a={headers:t};e.employeeModel.CreatedBy=this.$store.state.user.name,await K.a.post("api/Employees/PostEmployee",e.employeeModel,a).then(function(t){"ERROR"==t.data.result?e.displayNotification("error",t.data.message):(e.close(),e.getEmployees(),e.clean(),e.displayNotification("success","Se creó el registro correctamente."))}).catch(function(t){e.displayNotification("error",t)})}}}},ge=xe,ke=Object(n["a"])(ge,ye,be,!1,null,null,null),we=ke.exports;d()(ke,{VBtn:v["a"],VCard:f["a"],VCardActions:h["a"],VCardText:h["b"],VCardTitle:h["c"],VCol:H["a"],VContainer:y["a"],VDataTable:Z["a"],VDialog:J["a"],VDivider:Q["a"],VFlex:x["a"],VForm:ue["a"],VIcon:k["a"],VLayout:w["a"],VRow:X["a"],VSelect:me["a"],VSpacer:N["a"],VTextField:Y["a"],VTextarea:pe["a"],VToolbar:W["a"],VToolbarTitle:E["a"]});var Me=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-layout",{attrs:{"align-start":""}},[a("v-flex",[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,search:e.search,items:e.blacklists,"sort-by":"name"},scopedSlots:e._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[e._v("Bloqueados")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Búsqueda","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),a("v-spacer"),a("v-dialog",{attrs:{persistent:"","max-width":"600px"},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[a("v-btn",e._g({attrs:{color:"green",dark:""}},s),[a("v-icon",{attrs:{left:"",dark:""}},[e._v("add")]),e._v("Nuevo Registro\n              ")],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-form",{ref:"form"},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"Nombre*",rules:[e.rules.required]},model:{value:e.blackListModel.name,callback:function(t){e.$set(e.blackListModel,"name",t)},expression:"blackListModel.name"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{directives:[{name:"mask",rawName:"v-mask",value:e.mask,expression:"mask"}],attrs:{label:"Cédula*",rules:[e.rules.required]},model:{value:e.blackListModel.taxNumber,callback:function(t){e.$set(e.blackListModel,"taxNumber",t)},expression:"blackListModel.taxNumber"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[a("v-text-field",e._g({attrs:{label:"Fecha Inicio*","prepend-icon":"event",readonly:"",rules:[e.rules.required]},model:{value:e.blackListModel.startDate,callback:function(t){e.$set(e.blackListModel,"startDate",t)},expression:"blackListModel.startDate"}},s))]}}]),model:{value:e.menuStartDate,callback:function(t){e.menuStartDate=t},expression:"menuStartDate"}},[a("v-date-picker",{on:{input:function(t){e.menuStartDate=!1}},model:{value:e.blackListModel.startDate,callback:function(t){e.$set(e.blackListModel,"startDate",t)},expression:"blackListModel.startDate"}})],1)],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[a("v-text-field",e._g({attrs:{label:"Fecha Fin*","prepend-icon":"event",readonly:"",rules:[e.rules.required]},model:{value:e.blackListModel.endDate,callback:function(t){e.$set(e.blackListModel,"endDate",t)},expression:"blackListModel.endDate"}},s))]}}]),model:{value:e.menuEndDate,callback:function(t){e.menuEndDate=t},expression:"menuEndDate"}},[a("v-date-picker",{on:{input:function(t){e.menuEndDate=!1}},model:{value:e.blackListModel.endDate,callback:function(t){e.$set(e.blackListModel,"endDate",t)},expression:"blackListModel.endDate"}})],1)],1),a("v-col",{attrs:{cols:"12"}},[a("v-textarea",{attrs:{label:"Comentarios",hint:"Puede digitar cualquier observación o comentario."},model:{value:e.blackListModel.comment,callback:function(t){e.$set(e.blackListModel,"comment",t)},expression:"blackListModel.comment"}})],1)],1)],1),a("small",[e._v("*indica campo requerido.")])],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.dialog=!1}}},[e._v("Cerrar")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.save}},[a("v-icon",{attrs:{left:""}},[e._v("save")]),e._v("Guardar\n                  ")],1)],1)],1)],1)],1)],1)]},proxy:!0},{key:"item.options",fn:function(t){var s=t.item;return[a("v-icon",{staticClass:"mr-1",attrs:{size:"sm",variant:"outline-info",color:"blue"},on:{click:function(t){return e.editItem(s)}}},[e._v("edit")]),a("v-icon",{staticClass:"mr-1",attrs:{size:"sm",color:"red"},on:{click:function(t){return e.deleteItem(s)}}},[e._v("delete")])]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:e.getBlacklists}},[a("v-icon",{attrs:{left:"",dark:""}},[e._v("autorenew")]),e._v("Refrescar\n        ")],1)]},proxy:!0}])})],1)],1)},Re=[],_e={directives:{mask:z["mask"]},data(){return{rules:{required:e=>!!e||"Requerido."},mask:"###-#######-#",menuStartDate:!1,menuEndDate:!1,blacklists:[],dialog:!1,headers:[{text:"Nombre",sortable:!0,value:"name"},{text:"Cédula",sortable:!0,value:"taxNumber"},{text:"Fecha Inicio",sortable:!0,value:"startDate"},{text:"Fecha Fin",sortable:!0,value:"endDate"},{text:"Comentarios",sortable:!1,value:"comment"},{text:"Opciones",value:"options",sortable:!1}],search:"",editedIndex:-1,blackListModel:{blackListKey:0,name:"",taxNumber:"",startDate:"",endDate:"",comment:""}}},computed:{formTitle(){return-1===this.editedIndex?"Nuevo Registro":"Actualizar Registro"}},watch:{dialog(e){e||this.close(),void 0!=this.$refs.form&&this.$refs.form.resetValidation()}},created(){this.getBlacklists()},methods:{displayNotification(e,t){this.$swal.fire({position:"top-end",type:e,title:t,showConfirmButton:!1,timer:3e3})},async getBlacklists(){let e=this;await K.a.get("api/Blacklists/GetBlackLists").then(function(t){e.blacklists=t.data}).catch(function(t){console.log(t),e.displayNotification("error",t)})},editItem(e){this.editedIndex=this.blacklists.indexOf(e),this.blackListModel=Object.assign({},e),this.dialog=!0},deleteItem(e){this.$swal.fire({title:"¿Está Seguro de Eliminar este registro?",text:"¡No será posible revertir el cambio!",type:"warning",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"¡Borrar!",cancelButtonText:"Cancelar"}).then(t=>{if(t.value){let t=this;K.a.delete("api/BlackLists/DeleteBlackList/"+e.blackListKey).then(function(e){"ERROR"==e.data.result?t.displayNotification("error",e.data.message):(t.close(),t.getBlacklists(),t.clean(),t.displayNotification("success","Se eliminó el registro correctamente."))}).catch(function(e){t.displayNotification("error",e)})}})},close(){this.dialog=!1,setTimeout(()=>{this.blackListModel=Object.assign({},this.defaultItem),this.editedIndex=-1},300)},clean(){this.blackListModel={blackListKey:0,name:"",taxNumber:"",startDate:"",endDate:"",comment:""}},async save(){if(this.$refs.form.validate())if(this.editedIndex>-1){let e=this;e.blackListModel.ModifiedBy=this.$store.state.user.name,await K.a.put("api/BlackLists/PutBlackList",e.blackListModel).then(function(t){"ERROR"==t.data.result?e.displayNotification("error",t.data.message):(e.close(),e.getBlacklists(),e.clean(),e.displayNotification("success","Se actualizó el registro correctamente."))}).catch(function(t){e.displayNotification("error",t)})}else{let e=this;e.blackListModel.CreatedBy=this.$store.state.user.name,await K.a.post("api/BlackLists/PostBlackList",e.blackListModel).then(function(t){"ERROR"==t.data.result?e.displayNotification("error",t.data.message):(e.close(),e.getBlacklists(),e.clean(),e.displayNotification("success","Se creó el registro correctamente."))}).catch(function(t){e.displayNotification("error",t)})}}}},Ve=_e,Ce=a("2e4b"),qe=a("e449"),Ne=Object(n["a"])(Ve,Me,Re,!1,null,null,null),Ee=Ne.exports;d()(Ne,{VBtn:v["a"],VCard:f["a"],VCardActions:h["a"],VCardText:h["b"],VCardTitle:h["c"],VCol:H["a"],VContainer:y["a"],VDataTable:Z["a"],VDatePicker:Ce["a"],VDialog:J["a"],VDivider:Q["a"],VFlex:x["a"],VForm:ue["a"],VIcon:k["a"],VLayout:w["a"],VMenu:qe["a"],VRow:X["a"],VSpacer:N["a"],VTextField:Y["a"],VTextarea:pe["a"],VToolbar:W["a"],VToolbarTitle:E["a"]});var Te=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-layout",{attrs:{"align-start":""}},[a("v-flex",[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,search:e.search,items:e.users,"sort-by":"name"},scopedSlots:e._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[e._v("Usuarios")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Búsqueda","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),a("v-spacer"),a("v-dialog",{attrs:{persistent:"","max-width":"600px"},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[a("v-btn",e._g({attrs:{color:"green",dark:""}},s),[a("v-icon",{attrs:{left:"",dark:""}},[e._v("person_add")]),e._v("Nuevo Usuario\n              ")],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-form",{ref:"form"},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"Nombre*",rules:[e.rules.required]},model:{value:e.userModel.name,callback:function(t){e.$set(e.userModel,"name",t)},expression:"userModel.name"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-select",{attrs:{items:e.roles,"item-text":"description","item-value":"roleKey",label:"Rol*",rules:[e.rules.required]},model:{value:e.userModel.roleKey,callback:function(t){e.$set(e.userModel,"roleKey",t)},expression:"userModel.roleKey"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"Correo*",rules:[e.rules.required,e.rules.email]},model:{value:e.userModel.email,callback:function(t){e.$set(e.userModel,"email",t)},expression:"userModel.email"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"Contraseña*",type:"password",rules:[e.rules.required]},model:{value:e.userModel.password,callback:function(t){e.$set(e.userModel,"password",t)},expression:"userModel.password"}})],1)],1)],1),a("small",[e._v("*indica campo requerido.")])],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.dialog=!1}}},[e._v("Cerrar")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.save}},[a("v-icon",{attrs:{left:""}},[e._v("save")]),e._v("Guardar\n                  ")],1)],1)],1)],1)],1)],1)]},proxy:!0},{key:"item.options",fn:function(t){var s=t.item;return[a("v-icon",{staticClass:"mr-1",attrs:{size:"sm",variant:"outline-info",color:"blue"},on:{click:function(t){return e.editItem(s)}}},[e._v("edit")]),a("v-icon",{staticClass:"mr-1",attrs:{size:"sm",color:"red"},on:{click:function(t){return e.deleteItem(s)}}},[e._v("delete")])]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:e.getUsers}},[a("v-icon",{attrs:{left:"",dark:""}},[e._v("autorenew")]),e._v("Refrescar\n        ")],1)]},proxy:!0}])})],1)],1)},$e=[],De={directives:{mask:z["mask"]},data(){return{mask:"(###)-###-####",users:[],roles:[],dialog:!1,headers:[{text:"Nombre",sortable:!0,value:"name"},{text:"Role",sortable:!0,value:"roleName"},{text:"Correo",sortable:!1,value:"email"},{text:"Opciones",value:"options",sortable:!1}],rules:{required:e=>!!e||"Requerido.",email:e=>{const t=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)||"Correo Inválido."}},search:"",editedIndex:-1,userModel:{userKey:0,name:"",roleKey:0,email:"",password:"",isNewPassword:!1,password_hash:"",password_salt:""},passwordAnt:""}},computed:{formTitle(){return-1===this.editedIndex?"Nuevo Usuario":"Actualizar Usuario"}},watch:{dialog(e){e||this.close(),void 0!=this.$refs.form&&this.$refs.form.resetValidation()}},created(){this.getUsers(),this.getRoles()},methods:{displayNotification(e,t){this.$swal.fire({position:"top-end",type:e,title:t,showConfirmButton:!1,timer:3e3})},async getUsers(){let e=this,t={Authorization:"Bearer "+this.$store.state.token},a={headers:t};await K.a.get("api/Users/GetUsers",a).then(function(t){e.users=t.data}).catch(function(e){console.log(e)})},async getRoles(){let e=this,t={Authorization:"Bearer "+this.$store.state.token},a={headers:t};await K.a.get("api/Roles/GetRoles",a).then(function(t){e.roles=t.data}).catch(function(e){console.log(e)})},editItem(e){this.editedIndex=this.users.indexOf(e),this.userModel=Object.assign({},e),this.userModel.password=this.userModel.password_hash,this.passwordAnt=this.userModel.password_hash,this.dialog=!0},deleteItem(e){this.$swal.fire({title:"¿Está Seguro de Eliminar este usuario?",text:"¡No será posible revertir el cambio!",type:"warning",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"¡Borrar!",cancelButtonText:"Cancelar"}).then(t=>{if(t.value){let t=this,a={Authorization:"Bearer "+this.$store.state.token},s={headers:a};K.a.delete("api/Users/DeleteUser/"+e.userKey,s).then(function(e){"ERROR"==e.data.result?t.displayNotification("error",e.data.message):(t.close(),t.getUsers(),t.clean(),t.displayNotification("success","Se eliminó el usuario correctamente."))}).catch(function(e){t.displayNotification("error",e)})}})},close(){this.dialog=!1,setTimeout(()=>{this.userModel=Object.assign({},this.defaultItem),this.editedIndex=-1},300)},clean(){this.userModel={userKey:0,name:"",roleKey:0,email:"",password:"",isNewPassword:!1,password_hash:"",password_salt:""},this.passwordAnt=""},async save(){if(this.$refs.form.validate())if(this.editedIndex>-1){let e=this,t={Authorization:"Bearer "+this.$store.state.token},a={headers:t};e.userModel.ModifiedBy=this.$store.state.user.name,e.userModel.password!=e.passwordAnt&&(e.userModel.isNewPassword=!0),await K.a.put("api/Users/PutUser",e.userModel,a).then(function(t){"ERROR"==t.data.result?e.displayNotification("error",t.data.message):(e.close(),e.getUsers(),e.clean(),e.displayNotification("success","Se actualizó el usuario correctamente."))}).catch(function(t){e.displayNotification("error",t)})}else{let e=this,t={Authorization:"Bearer "+this.$store.state.token},a={headers:t};e.userModel.isNewPassword=!0,e.userModel.password_hash="",e.userModel.password_salt="",e.userModel.CreatedBy=this.$store.state.user.name,await K.a.post("api/Users/PostUser",e.userModel,a).then(function(t){"ERROR"==t.data.result?e.displayNotification("error",t.data.message):(e.close(),e.getUsers(),e.clean(),e.displayNotification("success","Se creó el registro correctamente."))}).catch(function(t){e.displayNotification("error",t)})}}}},Be=De,Se=Object(n["a"])(Be,Te,$e,!1,null,null,null),Pe=Se.exports;d()(Se,{VBtn:v["a"],VCard:f["a"],VCardActions:h["a"],VCardText:h["b"],VCardTitle:h["c"],VCol:H["a"],VContainer:y["a"],VDataTable:Z["a"],VDialog:J["a"],VDivider:Q["a"],VFlex:x["a"],VForm:ue["a"],VIcon:k["a"],VLayout:w["a"],VRow:X["a"],VSelect:me["a"],VSpacer:N["a"],VTextField:Y["a"],VToolbar:W["a"],VToolbarTitle:E["a"]});var Ie=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-layout",{attrs:{"align-start":""}},[a("v-flex",[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,search:e.search,items:e.employeerequest,"sort-by":"employeeRequestKey"},scopedSlots:e._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[e._v("Solicitudes de Visitas")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Búsqueda","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),a("v-spacer"),a("v-btn",{staticStyle:{"margin-right":"10px"},attrs:{color:"blue",dark:""},on:{click:e.showUploadModal}},[a("v-icon",{attrs:{left:"",dark:""}},[e._v("cloud_upload")]),e._v("Cargar\n          ")],1),a("v-dialog",{attrs:{persistent:"","max-width":"auto"},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[a("v-btn",e._g({attrs:{color:"green",dark:""}},s),[a("v-icon",{attrs:{left:"",dark:""}},[e._v("add")]),e._v("Nueva Solicitud\n              ")],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-form",{ref:"form"},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"7"}},[a("v-autocomplete",{attrs:{items:e.employees,rules:[e.rules.required],color:"blue-grey lighten-2",label:"Empleado*","item-text":"displayAutoComplete","item-value":"employeeKey",hint:"Tarjeta - Empleado - Departamento"},model:{value:e.employeeRequestModel.employeeKey,callback:function(t){e.$set(e.employeeRequestModel,"employeeKey",t)},expression:"employeeRequestModel.employeeKey"}})],1),a("v-col",{attrs:{cols:"1"}}),a("v-col",{attrs:{cols:"2"}},[a("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[a("v-text-field",e._g({attrs:{label:"Fecha Inicio*","prepend-icon":"event",readonly:"",rules:[e.rules.required]},model:{value:e.employeeRequestModel.startDate,callback:function(t){e.$set(e.employeeRequestModel,"startDate",t)},expression:"employeeRequestModel.startDate"}},s))]}}]),model:{value:e.menuStartDate,callback:function(t){e.menuStartDate=t},expression:"menuStartDate"}},[a("v-date-picker",{on:{input:function(t){e.menuStartDate=!1}},model:{value:e.employeeRequestModel.startDate,callback:function(t){e.$set(e.employeeRequestModel,"startDate",t)},expression:"employeeRequestModel.startDate"}})],1)],1),a("v-col",{attrs:{cols:"2"}},[a("v-menu",{ref:"starttimemenu",attrs:{"close-on-content-click":!1,"nudge-right":40,"return-value":e.employeeRequestModel.startTime,transition:"scale-transition","offset-y":"","full-width":"","max-width":"290px","min-width":"290px"},on:{"update:returnValue":function(t){return e.$set(e.employeeRequestModel,"startTime",t)},"update:return-value":function(t){return e.$set(e.employeeRequestModel,"startTime",t)}},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[a("v-text-field",e._g({directives:[{name:"mask",rawName:"v-mask",value:e.maskDate,expression:"maskDate"}],attrs:{label:"Hora Inicio*","prepend-icon":"access_time",readonly:"",rules:[e.rules.required]},model:{value:e.employeeRequestModel.startTime,callback:function(t){e.$set(e.employeeRequestModel,"startTime",t)},expression:"employeeRequestModel.startTime"}},s))]}}]),model:{value:e.menuStartTime,callback:function(t){e.menuStartTime=t},expression:"menuStartTime"}},[e.menuStartTime?a("v-time-picker",{attrs:{"full-width":""},on:{"click:minute":function(t){return e.$refs.starttimemenu.save(e.employeeRequestModel.startTime)}},model:{value:e.employeeRequestModel.startTime,callback:function(t){e.$set(e.employeeRequestModel,"startTime",t)},expression:"employeeRequestModel.startTime"}}):e._e()],1)],1),a("v-col",{attrs:{cols:"3"}},[a("v-text-field",{attrs:{hint:"Nombre del Visitante",label:"Nombre*",rules:[e.rules.required]},model:{value:e.employeeRequestModel.visitorName,callback:function(t){e.$set(e.employeeRequestModel,"visitorName",t)},expression:"employeeRequestModel.visitorName"}})],1),a("v-col",{attrs:{cols:"4"}},[a("v-text-field",{attrs:{label:"Correo"},model:{value:e.employeeRequestModel.visitorEmail,callback:function(t){e.$set(e.employeeRequestModel,"visitorEmail",t)},expression:"employeeRequestModel.visitorEmail"}})],1),a("v-col",{attrs:{cols:"1"}}),a("v-col",{attrs:{cols:"2"}},[a("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[a("v-text-field",e._g({attrs:{label:"Fecha Fin*","prepend-icon":"event",readonly:"",rules:[e.rules.required]},model:{value:e.employeeRequestModel.endDate,callback:function(t){e.$set(e.employeeRequestModel,"endDate",t)},expression:"employeeRequestModel.endDate"}},s))]}}]),model:{value:e.menuEndDate,callback:function(t){e.menuEndDate=t},expression:"menuEndDate"}},[a("v-date-picker",{on:{input:function(t){e.menuEndDate=!1}},model:{value:e.employeeRequestModel.endDate,callback:function(t){e.$set(e.employeeRequestModel,"endDate",t)},expression:"employeeRequestModel.endDate"}})],1)],1),a("v-col",{attrs:{cols:"2"}},[a("v-menu",{ref:"endtimemenu",attrs:{"close-on-content-click":!1,"nudge-right":40,"return-value":e.employeeRequestModel.endTime,transition:"scale-transition","offset-y":"","full-width":"","max-width":"290px","min-width":"290px"},on:{"update:returnValue":function(t){return e.$set(e.employeeRequestModel,"endTime",t)},"update:return-value":function(t){return e.$set(e.employeeRequestModel,"endTime",t)}},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[a("v-text-field",e._g({directives:[{name:"mask",rawName:"v-mask",value:e.maskDate,expression:"maskDate"}],attrs:{label:"Hora Fin*","prepend-icon":"access_time",readonly:"",rules:[e.rules.required]},model:{value:e.employeeRequestModel.endTime,callback:function(t){e.$set(e.employeeRequestModel,"endTime",t)},expression:"employeeRequestModel.endTime"}},s))]}}]),model:{value:e.menuEndTime,callback:function(t){e.menuEndTime=t},expression:"menuEndTime"}},[e.menuEndTime?a("v-time-picker",{attrs:{"full-width":""},on:{"click:minute":function(t){return e.$refs.endtimemenu.save(e.employeeRequestModel.endTime)}},model:{value:e.employeeRequestModel.endTime,callback:function(t){e.$set(e.employeeRequestModel,"endTime",t)},expression:"employeeRequestModel.endTime"}}):e._e()],1)],1),a("v-col",{attrs:{cols:"3"}},[a("v-text-field",{directives:[{name:"mask",rawName:"v-mask",value:e.mask,expression:"mask"}],attrs:{label:"Telefono"},model:{value:e.employeeRequestModel.visitorPhone,callback:function(t){e.$set(e.employeeRequestModel,"visitorPhone",t)},expression:"employeeRequestModel.visitorPhone"}})],1),a("v-col",{attrs:{cols:"4"}},[a("v-select",{attrs:{items:e.purposes,"item-text":"description","item-value":"purposeKey",label:"Propósito*",rules:[e.rules.required]},model:{value:e.employeeRequestModel.purposeKey,callback:function(t){e.$set(e.employeeRequestModel,"purposeKey",t)},expression:"employeeRequestModel.purposeKey"}})],1),a("v-col",{attrs:{cols:"1"}}),e.displayRepeat?e._e():a("v-col",{attrs:{cols:"4"}}),e.displayRepeat?a("v-col",{attrs:{cols:"4"}},[a("v-switch",{attrs:{label:"Visita Recurrente"},model:{value:e.repeat,callback:function(t){e.repeat=t},expression:"repeat"}}),e.repeat?[a("v-row",{attrs:{justify:"space-around"}},[a("v-checkbox",{staticClass:"mx-2",attrs:{label:"L"},model:{value:e.days.mon,callback:function(t){e.$set(e.days,"mon",t)},expression:"days.mon"}}),a("v-checkbox",{staticClass:"mx-2",attrs:{label:"M"},model:{value:e.days.tue,callback:function(t){e.$set(e.days,"tue",t)},expression:"days.tue"}}),a("v-checkbox",{staticClass:"mx-2",attrs:{label:"X"},model:{value:e.days.wed,callback:function(t){e.$set(e.days,"wed",t)},expression:"days.wed"}}),a("v-checkbox",{staticClass:"mx-2",attrs:{label:"J"},model:{value:e.days.thu,callback:function(t){e.$set(e.days,"thu",t)},expression:"days.thu"}}),a("v-checkbox",{staticClass:"mx-2",attrs:{label:"V"},model:{value:e.days.fri,callback:function(t){e.$set(e.days,"fri",t)},expression:"days.fri"}}),a("v-checkbox",{staticClass:"mx-2",attrs:{label:"S"},model:{value:e.days.sat,callback:function(t){e.$set(e.days,"sat",t)},expression:"days.sat"}}),a("v-checkbox",{staticClass:"mx-2",attrs:{label:"D"},model:{value:e.days.sun,callback:function(t){e.$set(e.days,"sun",t)},expression:"days.sun"}})],1)]:e._e()],2):e._e(),a("v-col",{attrs:{cols:"3"}},[a("v-text-field",{attrs:{loading:e.loadingRNCButton,label:"RNC*",rules:[e.rules.required],hint:"RNC de la Compañía del visitante"},model:{value:e.employeeRequestModel.taxNumber,callback:function(t){e.$set(e.employeeRequestModel,"taxNumber",t)},expression:"employeeRequestModel.taxNumber"}})],1),a("v-col",{attrs:{cols:"1"}},[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[a("v-btn",e._g({attrs:{icon:""},on:{click:e.verifyRNC}},s),[a("v-icon",{attrs:{color:"green lighten-1"}},[e._v("search")])],1)]}}]),model:{value:e.showTooltip,callback:function(t){e.showTooltip=t},expression:"showTooltip"}},[a("span",[e._v("Verificar en DGII")])])],1),a("v-col",{attrs:{cols:"3"}},[a("v-textarea",{attrs:{rows:2,disabled:"",label:"Compañía"},model:{value:e.employeeRequestModel.company,callback:function(t){e.$set(e.employeeRequestModel,"company",t)},expression:"employeeRequestModel.company"}})],1),a("v-col",{attrs:{cols:"7"}},[a("v-textarea",{attrs:{label:"Comentarios",hint:"Puede digitar cualquier observación o comentario."},model:{value:e.employeeRequestModel.comments,callback:function(t){e.$set(e.employeeRequestModel,"comments",t)},expression:"employeeRequestModel.comments"}})],1)],1)],1),a("small",[e._v("*indica campo requerido.")])],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.dialog=!1}}},[e._v("Cerrar")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.save}},[a("v-icon",{attrs:{left:""}},[e._v("save")]),e._v("Guardar\n                  ")],1)],1)],1)],1)],1)],1)]},proxy:!0},{key:"item.options",fn:function(t){var s=t.item;return[a("v-icon",{staticClass:"mr-1",attrs:{size:"sm",variant:"outline-info",color:"blue"},on:{click:function(t){return e.editItem(s)}}},[e._v("edit")]),a("v-icon",{staticClass:"mr-1",attrs:{size:"sm",color:"red"},on:{click:function(t){return e.deleteItem(s)}}},[e._v("delete")])]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:e.getEmployeeRequests}},[a("v-icon",{attrs:{left:"",dark:""}},[e._v("autorenew")]),e._v("Refrescar\n        ")],1)]},proxy:!0}])})],1),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.uploadModal,callback:function(t){e.uploadModal=t},expression:"uploadModal"}},[a("v-card",[a("v-card-text",[[a("v-file-input",{attrs:{accept:"file/*.csv",label:"Cargar Plantilla"},model:{value:e.file,callback:function(t){e.file=t},expression:"file"}}),a("v-btn",{attrs:{color:"blue",dark:""},on:{click:function(t){return e.UploadEmployeeRequest()}}},[a("v-icon",{attrs:{left:""}},[e._v("cloud_upload")]),e._v("Cargar\n          ")],1),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){return e.hideUploadModal()}}},[e._v("Cancelar")])]],2)],1)],1)],1)},Ae=[],Ke=a("369b"),ze=a.n(Ke),Le={directives:{mask:z["mask"]},data(){return{fileProcessed:null,file:null,uploadModal:!1,loadingRNCButton:!1,showTooltip:!1,days:{mon:!1,tue:!1,wed:!1,thu:!1,fri:!1,sat:!1,sun:!1},displayRepeat:!0,repeat:!1,mask:"(###)-###-####",maskDate:"##:##",menuStartDate:!1,menuEndDate:!1,menuStartTime:!1,menuEndTime:!1,employeerequest:[],employees:[],purposes:[],dialog:!1,headers:[{text:"Nombre",sortable:!0,value:"visitorName"},{text:"Compañía",sortable:!0,value:"company"},{text:"Teléfono",sortable:!0,value:"visitorPhone"},{text:"Fecha Esperada",sortable:!0,value:"startDate"},{text:"Fecha Salida",sortable:!0,value:"endDate"},{text:"Propósito",sortable:!0,value:"purposeDescription"},{text:"Empleado(Quién lo recibirá)",sortable:!0,value:"employeeName"},{text:"Opciones",value:"options",sortable:!1}],rules:{required:e=>!!e||"Requerido.",email:e=>{const t=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)||"Correo Inválido."}},search:"",editedIndex:-1,employeeRequestModel:{employeeRequestKey:0,employeeKey:0,visitorName:"",visitorEmail:"",visitorPhone:"",taxNumber:"",company:"",purposeKey:0,startDate:"",startTime:null,endDate:"",endTime:null,comments:"",status:0,employeeName:"",purposeDescription:"",daysList:""}}},computed:{formTitle(){return-1===this.editedIndex?"Nueva Solicitud":"Actualizar Solicitud"}},watch:{dialog(e){e||this.close(),void 0!=this.$refs.form&&this.$refs.form.resetValidation()},repeat(e){e||this.cleanDays()}},created(){this.getEmployeeRequests(),this.getEmployees(),this.getPurposes()},methods:{UploadEmployeeRequest(){if(null==this.file)return void this.displayNotification("error","El archivo es de un formato incorrecto o no se ha cargado.");let e=this;ze.a.parse(this.file,{header:!0,complete:function(t){e.fileProcessed=t.data;var a=t.data.map(t=>{return{employeeRequestKey:0,employeeKey:e.findEmployeeKey(e.employees.find(e=>{if(e.employeeId==t.TarjetaEmpleado)return e.employeeKey})),visitorName:t.Visitante,visitorEmail:t.Email,visitorPhone:t.Telefono,taxNumber:t.RNCVisitante,company:t.Empresa,purposeKey:e.findPurposeKey(e.purposes.find(e=>{if(e.description.toLowerCase()==(void 0!=t.Proposito?t.Proposito.toLowerCase():""))return e.purposeKey})),startDate:t.FechaInicio,startTime:t.HoraInicio,endDate:t.FechaFin,endTime:t.HoraFin,comments:t.Comentarios,status:0,employeeName:"",purposeDescription:"",daysList:""}});a=a.filter(e=>void 0!=e.employeeKey),console.log(a);let s={Authorization:"Bearer "+e.$store.state.token},o={headers:s};K.a.post("api/EmployeeRequests/PostEmployeeRequests",a,o).then(function(t){"ERROR"==t.data.result?e.displayNotification("error",t.data.message):(e.uploadModal=!1,e.getEmployeeRequests(),e.clean(),e.displayNotification("success","Se cargaron los registros correctamente."))}).catch(function(t){e.displayNotification("error",t)})}})},findEmployeeKey(e){if(void 0!=e)return e.employeeKey},findPurposeKey(e){if(void 0!=e)return e.purposeKey},showUploadModal(){this.uploadModal=!0},hideUploadModal(){this.uploadModal=!1,this.file=null},displayNotification(e,t){this.$swal.fire({position:"top-end",type:e,title:t,showConfirmButton:!1,timer:2500})},async getEmployeeRequests(){let e=this,t={Authorization:"Bearer "+this.$store.state.token},a={headers:t};await K.a.get("api/EmployeeRequests/GetEmployeeRequests",a).then(function(t){e.employeerequest=t.data}).catch(function(t){e.displayNotification("error",t)})},async getEmployees(){let e=this,t={Authorization:"Bearer "+this.$store.state.token},a={headers:t};await K.a.get("api/Employees/GetEmployees",a).then(function(t){e.employees=t.data}).catch(function(t){e.displayNotification("error",t)})},async getPurposes(){let e=this,t={Authorization:"Bearer "+this.$store.state.token},a={headers:t};await K.a.get("api/Purposes/GetPurposes",a).then(function(t){e.purposes=t.data}).catch(function(t){e.displayNotification("error",t)})},async verifyRNC(){let e=this;e.loadingRNCButton=!0;let t={Authorization:"Bearer "+this.$store.state.token},a={headers:t};await K.a.get("api/Services/VerifyRNC/"+e.employeeRequestModel.taxNumber,a).then(function(t){e.employeeRequestModel.company=t.data.nombre,e.loadingRNCButton=!1,null==t.data.nombre&&e.displayNotification("error","El RNC/Cédula es inválido.")}).catch(function(t){e.displayNotification("error",t)})},editItem(e){this.editedIndex=this.employeerequest.indexOf(e),this.employeeRequestModel=Object.assign({},e),this.editedIndex>-1?this.displayRepeat=!1:this.displayRepeat=!0,this.dialog=!0},deleteItem(e){this.$swal.fire({title:"¿Está Seguro de Eliminar esta solicitud?",text:"¡No será posible revertir el cambio!",type:"warning",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"¡Borrar!",cancelButtonText:"Cancelar"}).then(t=>{if(t.value){let t=this,a={Authorization:"Bearer "+this.$store.state.token},s={headers:a};K.a.delete("api/EmployeeRequests/DeleteEmployeeRequest/"+e.employeeRequestKey,s).then(function(e){"ERROR"==e.data.result?t.displayNotification("error",e.data.message):(t.close(),t.getEmployeeRequests(),t.clean(),t.displayNotification("success","Se eliminó la solicitud correctamente."))}).catch(function(e){t.displayNotification("error",e)})}})},close(){this.dialog=!1,this.clean(),this.cleanDays(),setTimeout(()=>{this.employeeRequestModel=Object.assign({},this.defaultItem),this.editedIndex=-1},300)},clean(){this.employeeRequestModel={employeeRequestKey:0,employeeKey:0,visitorName:"",visitorEmail:"",visitorPhone:"",taxNumber:"",company:"",purposeKey:0,startDate:"",startTime:null,endDate:"",endTime:null,comments:"",status:0,employeeName:"",purposeDescription:"",daysList:""}},cleanDays(){this.days={mon:!1,tue:!1,wed:!1,thu:!1,fri:!1,sat:!1,sun:!1},this.repeat=!1},setRepeatedDays(){let e=[];this.days.mon&&e.push("mon"),this.days.tue&&e.push("tue"),this.days.wed&&e.push("wed"),this.days.thu&&e.push("thu"),this.days.fri&&e.push("fri"),this.days.sat&&e.push("sat"),this.days.sun&&e.push("sun"),this.employeeRequestModel.daysList=e.join()},async save(){if(this.$refs.form.validate())if(this.editedIndex>-1){let e=this,t={Authorization:"Bearer "+this.$store.state.token},a={headers:t};e.employeeRequestModel.ModifiedBy=this.$store.state.user.name,await K.a.put("api/EmployeeRequests/PutEmployeeRequest",e.employeeRequestModel,a).then(function(t){"ERROR"==t.data.result?e.displayNotification("error",t.data.message):(e.close(),e.getEmployeeRequests(),e.clean(),e.cleanDays(),e.displayNotification("success","Se actualizó el empleado correctamente."))}).catch(function(t){e.displayNotification("error",t)})}else{let e=this,t={Authorization:"Bearer "+this.$store.state.token},a={headers:t};e.employeeRequestModel.CreatedBy=this.$store.state.user.name,e.repeat&&e.setRepeatedDays(),await K.a.post("api/EmployeeRequests/PostEmployeeRequest",e.employeeRequestModel,a).then(function(t){"ERROR"==t.data.result?e.displayNotification("error",t.data.message):(e.close(),e.getEmployeeRequests(),e.clean(),e.displayNotification("success","Se creó el registro correctamente."))}).catch(function(t){e.displayNotification("error",t)})}}}},Oe=Le,Fe=a("ac7c"),je=a("23a7"),Ue=a("b73d"),Ge=a("c964"),He=Object(n["a"])(Oe,Ie,Ae,!1,null,null,null),Ze=He.exports;d()(He,{VAutocomplete:de["a"],VBtn:v["a"],VCard:f["a"],VCardActions:h["a"],VCardText:h["b"],VCardTitle:h["c"],VCheckbox:Fe["a"],VCol:H["a"],VContainer:y["a"],VDataTable:Z["a"],VDatePicker:Ce["a"],VDialog:J["a"],VDivider:Q["a"],VFileInput:je["a"],VFlex:x["a"],VForm:ue["a"],VIcon:k["a"],VLayout:w["a"],VMenu:qe["a"],VRow:X["a"],VSelect:me["a"],VSpacer:N["a"],VSwitch:Ue["a"],VTextField:Y["a"],VTextarea:pe["a"],VTimePicker:Ge["b"],VToolbar:W["a"],VToolbarTitle:E["a"],VTooltip:ve["a"]});var Je=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-content",[a("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{attrs:{cols:"12",sm:"8",md:"4"}},[a("v-card",{staticClass:"elevation-12"},[a("v-toolbar",{attrs:{color:"primary",dark:"",flat:""}},[a("v-toolbar-title",[e._v("Sistema de Visitas")]),a("div",{staticClass:"flex-grow-1"})],1),a("v-card-text",[a("v-form",[a("v-text-field",{attrs:{label:"Usuario",name:"login","prepend-icon":"person",type:"text",rules:[e.rules.required]},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),a("v-text-field",{attrs:{id:"password",label:"Contraseña",name:"password","prepend-icon":"lock",type:"password",rules:[e.rules.required]},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login(t)}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e.error?a("v-flex",{staticClass:"red--text"},[e._v(e._s(e.error))]):e._e()],1)],1),a("v-card-actions",[a("div",{staticClass:"flex-grow-1"}),a("v-btn",{attrs:{color:"primary"},on:{click:e.login}},[e._v("Ingresar")])],1)],1)],1)],1)],1)],1)},Qe=[],Xe={data:()=>({username:"",password:"",rules:{required:e=>!!e||"Requerido."},error:null}),methods:{async login(){this.error=null,await K.a.post("api/Login/Login",{userName:this.username,password:this.password}).then(e=>{return e.data}).then(e=>{this.$store.dispatch("saveToken",e.token),this.$router.push({name:"home"})}).catch(e=>{void 0==e.response&&(this.error="Hay un error de conexión con el servidor."),400==e.response.status?this.error="No es un usuario válido":404==e.response.status?this.error="No existe el usuario o sus datos son incorrectos":this.error="Ocurrió un error"})}}},Ye=Xe,We=Object(n["a"])(Ye,Je,Qe,!1,null,null,null),et=We.exports;d()(We,{VBtn:v["a"],VCard:f["a"],VCardActions:h["a"],VCardText:h["b"],VCol:H["a"],VContainer:y["a"],VContent:b["a"],VFlex:x["a"],VForm:ue["a"],VRow:X["a"],VTextField:Y["a"],VToolbar:W["a"],VToolbarTitle:E["a"]});var tt=a("2f62"),at=a("04e1"),st=a.n(at);s["a"].use(tt["a"]);var ot=new tt["a"].Store({state:{token:null,user:null},mutations:{setToken(e,t){e.token=t},setUser(e,t){e.user=t}},actions:{saveToken({commit:e},t){e("setToken",t),e("setUser",st()(t)),localStorage.setItem("token",t)},autoLogin({commit:e}){let t=localStorage.getItem("token");t&&(e("setToken",t),e("setUser",st()(t)),rt.push({name:"home"}))},logOut({commit:e}){e("setToken",null),e("setUser",null),localStorage.removeItem("token"),rt.push({name:"login"})}}});s["a"].use(D["a"]);var it=new D["a"]({mode:"history",base:"/",routes:[{path:"/",name:"home",component:ie,meta:{administrator:!0,recepionist:!0}},{path:"/visitors",name:"visitors",component:he,meta:{administrator:!0,recepionist:!0}},{path:"/visitors/:id",name:"visitorId",component:he,meta:{administrator:!0,recepionist:!0}},{path:"/employees",name:"employees",component:we,meta:{administrator:!0}},{path:"/blacklists",name:"blacklists",component:Ee,meta:{administrator:!0}},{path:"/users",name:"users",component:Pe,meta:{administrator:!0}},{path:"/employeerequests",name:"employeerequests",component:Ze,meta:{administrator:!0}},{path:"/login",name:"login",component:et,meta:{free:!0}}]});it.beforeEach((e,t,a)=>{e.matched.some(e=>e.meta.free)?a():ot.state.user&&"administrator"==ot.state.user.role?e.matched.some(e=>e.meta.administrator)&&a():ot.state.user&&"recepionist"==ot.state.user.role?e.matched.some(e=>e.meta.recepionist)&&a():a({name:"login"})});var rt=it,lt=a("f309");s["a"].use(lt["a"]);var nt=new lt["a"]({theme:{options:{customProperties:!0},themes:{light:{primary:"#1976D2",secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"}}},icons:{iconfont:"md"}}),ct=a("5886");s["a"].config.productionTip=!1,K.a.defaults.baseURL="https://vmsweb20191012024111.azurewebsites.net/",K.a.defaults.headers.common["Authorization"]="Bearer "+localStorage.getItem("token"),s["a"].use(ct["a"]),new s["a"]({router:rt,store:ot,vuetify:nt,render:e=>e($)}).$mount("#app")}});
//# sourceMappingURL=app.361cb855.js.map